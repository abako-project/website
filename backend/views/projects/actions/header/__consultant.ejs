<%
const actions = [];


if (locals.loginUser.developerId && locals.loginUser.developerId == project.consultantId) {

    if (locals.flowProjectState(project, locals.scope) === locals.ProjectState.ScopingInProgress) {

        // Si ya se han creado los milestones del proyecto, no permito que se editen.
        // Para evitar que se dupliquen los ya creados y los que guardo en req.session.scope.
        if (project.milestones.every(milestone => !milestone.id)) {
            actions.push({
                title: "Review Scope",
                callback: "/projects/" + project.id + "/milestones/edit",
                classes: "btn_primary btn_href"
            });
        }
    }

    if (locals.flowProjectState(project, locals.scope) === locals.ProjectState.ProjectInProgress && project.milestones.every(milestone => milestone.state === "completed")) {
        actions.push({
            title: "Evaluate Teammates",
            callback: "/projects/" + project.id + "/votations",
        });
    }
}
%>

<%- include("./__render", {actions}) %>


