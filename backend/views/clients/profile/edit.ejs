<!-- Choices.js CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">
<!-- Choices.js JS -->
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<% const client = c; %>

<div id="appTwoColumns">
    <div class="col1">
        <!-- Sidebar -->
        <%- include('../../components/_mainSidebar') %>
    </div>
    <div class="col2">
        <section class="profile">
            <div class="profileCard">
                <div class="profileCard__header">
                    <h2 class="profileCard__title">Edit Client Profile</h2>
                    <span class="profileCard__subtitle">Client data</span>
                </div>

                <form method="post" action="/clients/<%= client.id %>?_method=PUT" enctype="multipart/form-data">


                    <div class="profileCard__staticInfo">
                        <p><strong>Email:</strong> <%= client.user.email  %></p>
                    </div>

                    <div class="profileCard__section">
                        <h3>Name:</h3>
                        <input type="text" id="name" name="name" value="<%= client.name %>" placeholder="name" autocomplete="off" class="smallInput"/>
                    </div>

                    <div class="profileCard__section">
                        <h3>Description:</h3>
                        <textarea id="description" name="description"><%= client.description %></textarea>
                    </div>

                    <div class="profileCard__section">
                        <h3>Company:</h3>
                        <input type="text" id="company" name="company" value="<%= client.company %>" placeholder="Company" autocomplete="off" class="smallInput"/>
                    </div>
                    
                    <div class="profileCard__section">
                        <h3>Department:</h3>
                        <input type="text" id="department" name="department" value="<%= client.department %>" placeholder="Department" autocomplete="off" class="smallInput"/>
                    </div>

                    <div class="profileCard__section">
                        <h3>Web site:</h3>
                        <input type="text" id="website" name="website" value="<%= client.website %>"
                            placeholder="Web Site" autocomplete="off"/>
                    </div>

                     <div class="profileCard__section">
                        <h3>Location:</h3>
                        <input type="text" id="location" name="location" value="<%= client.location %>" placeholder="Location"
                            autocomplete="off"/>
                    </div>

                    <div class="profileCard__section">
                        <h3>Languages:</h3>
                        <select id="clientLanguages" name="languages[]" multiple size="6">
                            <% (allLanguages || []).forEach(lang => { 
                                const selected = (client.languages || []).some(i => i.id === lang.id); %>
                            <option value="<%= lang.id %>" <%= selected ? "selected" : "" %>>
                                <%= lang.code %> - <%= lang.name %>
                            </option>
                            <% }) %>
                        </select>
                    </div>

                        <div class="profileCard__section">
                            <h3> New Photo (Max size 2MB):</h3>
                            <label class="fileInput">
                                <span>Select fileâ€¦</span>
                                <input type="file" id="img" name="image"/>
                            </label>
                            <img id="photoPreview">
                        </div>

                        <div class="profileCard__section">
                        <div class="actionRow" >
                            <a href="/clients/<%= client.id %>/profile"> Cancel </a>
                            <input type="submit" value="Save"/> 
                        </div>
                    </div>
                </form>
            </div>
        </section>
    </div>
</div>

<script src="/javascripts/perfil.js"></script>



    

