
<section class="mainContentContainer dashboard">

    <% for (let project of projects) { %>

    <hr />

        <h1>Proyecto <%= project.title %></h1>


        <% let milestonesAwaitingPayment = project.milestones.filter(milestone => (milestone.state === "AwaitingPayment")); %>
        <% let milestonesPaid = project.milestones.filter(milestone => (milestone.state === "Paid")); %>

        <p>
            Total Budget Funded = $<%= project.milestones.reduce((acc, milestone) => acc + milestone.budget, 0) %>
        </p>
        <p>
            Funds Paid = $<%= milestonesPaid.reduce((acc, milestone) => acc + milestone.budget, 0) %>
        </p>
        <p>
            Funds Awaiting Payment = $<%= milestonesAwaitingPayment.reduce((acc, milestone) => acc + milestone.budget, 0) %>
        </p>

        <section class="milestoneGrid">

            <div class="milestoneGrid__col">
                <h3 class="colHeader">
                    <span class="counter"><%= milestonesAwaitingPayment.length %></span>
                    <span> Awaiting Payment </span>
                </h3>
                <% for (let milestone of milestonesAwaitingPayment) { %>
                    <%- include("./__paymentGridItem", {project, milestone}) %>
                <% } %>
            </div>


            <div class="milestoneGrid__col">
                <h3 class="colHeader">
                    <span class="counter"><%= milestonesPaid.length %></span>
                    <span> Paid</span>
                </h3>
                <% for (let milestone of milestonesPaid) { %>
                    <%- include("./__paymentGridItem", {project, milestone}) %>
                <% } %>
            </div>


        </section>
    <% } %>

        <hr />

</section>
